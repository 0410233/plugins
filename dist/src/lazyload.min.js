js.use("polyfill:IntersectionObserver",function(t){"use strict";var s=t.$||t.jQuery;function o(t,e){return this instanceof o?(this.settings=s.extend({src:"data-src",srcset:"data-srcset",selector:".lazyload",placeholder:"",delay:0},t||{}),this.images=e||document.querySelectorAll(this.settings.selector),this.observer=null,this.init(),this):new o(t,e)}o.prototype={init:function(){if(window.IntersectionObserver){var e=this;this.observer=new IntersectionObserver(function(t){t.forEach(function(t){0<t.intersectionRatio&&(e.observer.unobserve(t.target),e.loadImage(t.target))})},{root:null,rootMargin:"0px",threshold:[0]}),this.images.forEach(function(t){e.settings.placeholder&&("IMG"==t.tagName?t.src=e.settings.placeholder:t.style.backgroundImage='url("'+src+'")'),e.observer.observe(t)})}else this.loadImages()},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(this.settings){var e=this;this.images.forEach(function(t){e.loadImage(t)})}},loadImage:function(e){var s=e.getAttribute(this.settings.src),o=e.getAttribute(this.settings.srcset),n=this.settings;setTimeout(function(){if("IMG"==e.tagName)"function"==typeof n.onerror&&(e.onerror=function(){n.onerror.call(this)}),"function"==typeof n.onload&&(e.onload=function(){n.onload.call(this)}),s&&(e.src=s),o&&(e.srcset=o);else{var t=new Image;"function"==typeof n.onerror&&(t.onerror=function(){n.onerror.call(e)}),"function"==typeof n.onload&&(t.onload=function(){n.onload.call(e)}),e.style.backgroundImage="url("+s+")",t.src=s}},n.delay)},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},s.fn.lazyload=function(t){return new o(t,s.makeArray(this))},t.Lazyload=o});