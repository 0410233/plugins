!function(s){var e=function(t){var i={animation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in i)if(void 0!==t.style[n])return i[n]}(document.createElement("div")),t={in:{bottom:"animateInFromBottom",left:"animateInFromLeft",right:"animateInFromRight"},out:{bottom:"animateOutToBottom",left:"animateOutToLeft",right:"animateOutToRight"}};function o(t,i){return this._$menu=t,this._opts=s.extend({},i),this._$item=t.parent(),this._level=this._$item.parent().hasClass("menu__mainmenu")?1:2,this._side="bottom",this}function i(t,i){this._$root=t,(i=s.extend({breakPoint:992,auto:!1,animate:!1},i||{})).breakPoint=0<i.breakPoint?i.breakPoint:992,t.find(".menu__item--branch").each(function(){this._submenu=new o(s(this).children(".menu__submenu"),i)}),this._opts=i;var n=matchMedia("(min-width: "+this._opts.breakPoint+"px)");if(this._mode=n.matches?"lg":"sm",this._opts.auto){var e=this;n.addListener(function(){e._mode=this.matches?"lg":"sm",e.modeSwitch()})}return this.modeSwitch(),this}s.fn.cssAnimate=function(t,i){var n=this.css("display");return this.css({display:"block"}).one(e,function(){s(this).removeClass(t).css({display:n}),"function"==typeof i&&i.call(s(this))}).addClass(t),this},o.prototype={constructor:o,position:function(){var t,i,n=this._$item[0].getBoundingClientRect(),e=this._$menu[0].getBoundingClientRect();return this._level<2?(i=n.top+n.height,t=Math.max(Math.min(n.left,window.innerWidth-e.width-20),20),this._side="bottom"):(i=n.top,t=n.left+n.width,this._side="right",t+e.width+20>window.innerWidth&&0<n.left-e.width&&(t=n.left-e.width,this._side="left")),this._$menu.css({top:i+"px",left:t+"px"}),this},show:function(){this._$menu.css({clip:"auto"}),this._opts.animate&&this._$menu.cssAnimate("submenuAnimated "+t.in[this._side])},hide:function(){this._opts.animate?this._$menu.cssAnimate("submenuAnimated "+t.out[this._side],function(){this.css({clip:"rect(0,0,0,0)"})}):this._$menu.css({clip:"rect(0,0,0,0)"})}},i.prototype={constructor:i,modeSwitch:function(){"sm"===this._mode?(this._$root.find(".menu__submenu").parent().off("mouseenter mouseleave").css({display:"",clip:""}),this._$root.find(".menu__btn, .menu__toggle").off("click").on("click",function(t){t.stopPropagation(),console.log(this),s(this).parent().toggleClass("menu__item--open").children(".menu__mainmenu, .menu__submenu").slideToggle(120)}).siblings(".menu__mainmenu, .menu__submenu").hide().parent().removeClass("menu__item--open")):(this._$root.find(".menu__btn, .menu__toggle").off("click").siblings(".menu__mainmenu, .menu__submenu").show().parent().removeClass("menu__item--open"),this._$root.find(".menu__submenu").css({display:"block",clip:"rect(0px, 0px, 0px, 0px)"}).parent().on("mouseenter",function(){s(this).addClass("menu__item--open"),this._submenu.position().show()}).on("mouseleave",function(){s(this);s(this).removeClass("menu__item--open"),this._submenu.hide()}))}},s.fn.navmenu=function(t){return new i(this,t)}}(window.jQuery);