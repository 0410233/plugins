LazyScript.load("jquery",function(t){"use strict";var a=t.$||t.jQuery,e=function(t){var i={animation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in i)if(void 0!==t.style[n])return i[n]}(document.createElement("div"));function o(t,i){return this.$menu=a(t),this.$branch=this.$menu.parent(),this.opts=a.extend({},i),this._level=this.$branch.parent().hasClass("menu__mainmenu")?1:2,this._side="Bottom",this}function i(t,i){(i=a.extend({breakpoint:992,autoSwitch:!1,animate:!0},i||{})).breakpoint=0<i.breakpoint?i.breakpoint:992,this.$root=t,this.$mainmenu=this.$root.find(".menu__mainmenu");var n=[];this.$root.find(".menu__submenu").each(function(){n.push(new o(this,i))}),this.submenus=n,this.$btns=this.$root.find(".menu__btn,.menu__toggle");var s=matchMedia("(min-width: "+i.breakpoint+"px)");if(this.switchMode(s.matches?"lg":"sm"),i.autoSwitch){var e=this;s.addListener(function(){e.switchMode(this.matches?"lg":"sm")})}return this}o.prototype={constructor:o,init:function(t){if("sm"===t)this.$menu.hide(),this.$branch.off("mouseenter mouseleave").css({display:null,clip:null});else if("lg"===t){var i=this,n=this.$menu;this.$menu.css({display:"block",clip:"rect(0px, 0px, 0px, 0px)"}).parent().on("mouseenter",function(t){n[0]===t.target||n.has(t.target).length||(a(this).addClass("menu__item--open"),i.show())}).on("mouseleave",function(){a(this).removeClass("menu__item--open"),i.hide()})}},findPosition:function(){var t,i,n=this.$branch[0].getBoundingClientRect(),s=this.$menu[0].getBoundingClientRect();return this._level<2?(i=n.top+n.height,t=Math.max(Math.min(n.left,window.innerWidth-s.width-20),20),this._side="Bottom"):(i=n.top,t=n.left+n.width,this._side="Right",t+s.width+20>window.innerWidth&&0<n.left-s.width&&(t=n.left-s.width,this._side="Left")),this.$menu.css({top:i+"px",left:t+"px"}),this},animate:function(t,i){this.stop();var n=this.$menu;this.status={animation:t,display:n.css("display")},this.callback=i;var s=this;return n.css({display:"block"}).one(e,function(){s.stop(),"function"==typeof s.callback&&s.callback()}).addClass(t),this},stop:function(){return this.status&&(this.$menu.removeClass(this.status.animation).css({display:this.status.display}),this.status=null),this},show:function(){var t=this.$menu;this.findPosition(),this.opts.animate&&this.animate("submenuAnimated animateInFrom"+this._side),t.css({clip:"auto"})},hide:function(){var t=this.$menu;this.opts.animate?this.animate("submenuAnimated animateOutTo"+this._side,function(){t.css({clip:"rect(0,0,0,0)"})}):t.css({clip:"rect(0,0,0,0)"})}},i.prototype={constructor:i,switchMode:function(t){for(var i="menu__item--open",n=0,s=this.submenus.length;n<s;n++)this.submenus[n].init(t);"sm"===t?(this.$btns.off("click").on("click",function(t){t.stopPropagation(),a(this).parent().toggleClass("menu__item--open").children(".menu__mainmenu,.menu__submenu").slideToggle(120)}),this.$mainmenu.hide().parent().removeClass(i)):"lg"===t&&(this.$btns.off("click"),this.$mainmenu.show().parent().removeClass(i))}},a.fn.navmenu=function(t){return new i(this,t)}});